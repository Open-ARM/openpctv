#!/bin/sh

if [ -f /video/epg.dat ]; then
  a=`find /video -mmin +480 -name epg.dat -print`
  [ X$a = "X" ] && exit 0
fi

zh_epgurl=http://epg.xltvrobbs.net/epg/dm800/gemini800.tgz

. /etc/locale.conf

case $LANG in
  zh*)
    wget $zh_epgurl -O /tmp/epg.tgz || exit
    tar zvfx /tmp/epg.tgz -C /tmp || exit
    cp /tmp/gemini.epg.dat /video/epg.dat
    rm /tmp/epg.tgz /tmp/gemini.epg.dat
    ;;
  *)
    exit
esac
